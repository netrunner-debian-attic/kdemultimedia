Index: kdemultimedia-4.3.0/libkcompactdisc/wmlib/include/wm_config.h
===================================================================
--- kdemultimedia-4.3.0.orig/libkcompactdisc/wmlib/include/wm_config.h	2009-08-22 14:57:41.000000000 +0200
+++ kdemultimedia-4.3.0/libkcompactdisc/wmlib/include/wm_config.h	2009-08-22 14:58:20.000000000 +0200
@@ -106,9 +106,9 @@
  ***  ******  **  **  ******  ******  **  ******  **  *  **********
  ***  ******  **  **      **      **     ****    ***    ***********
  ******************************************************************/
-#if defined(__FreeBSD__) || defined(__FreeBSD) || defined(__DragonFly__)
+#if defined(__FreeBSD__) || defined(__FreeBSD) || defined(__DragonFly__) || defined(__FreeBSD_kernel__)
 
-#if (defined(__FreeBSD_version) && __FreeBSD_version >= 500100) || defined(__DragonFly__)
+#if (defined(__FreeBSD_version) && __FreeBSD_version >= 500100) || defined(__DragonFly__) || defined(__FreeBSD_kernel__)
 #define DEFAULT_CD_DEVICE	"/dev/acd0"
 #else
 #define DEFAULT_CD_DEVICE	"/dev/acd0c"
Index: kdemultimedia-4.3.0/libkcompactdisc/wmlib/plat_freebsd.c
===================================================================
--- kdemultimedia-4.3.0.orig/libkcompactdisc/wmlib/plat_freebsd.c	2009-08-22 14:57:19.000000000 +0200
+++ kdemultimedia-4.3.0/libkcompactdisc/wmlib/plat_freebsd.c	2009-08-22 14:57:37.000000000 +0200
@@ -26,7 +26,8 @@
  *
  */
 
-#if defined(__FreeBSD__) || defined(__FreeBSD) || defined(__NetBSD__) || defined (__NetBSD)
+#if defined(__FreeBSD__) || defined(__FreeBSD) || defined(__NetBSD__) || defined (__NetBSD) || defined(__FreeBSD_kernel__)
+
 
 #include <errno.h>
 #include <stdio.h>
